<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

		<!-- Settings Form View for Gandola Manager -->
		<record id="gandola_manager_settings_view_form" model="ir.ui.view">
			<field name="name">Gandola Manager Settings</field>
			<field name="model">res.config.settings</field>
			<field name="inherit_id" ref="base.res_config_settings_view_form" />
			<field name="arch" type="xml">
				<!-- FIX 1: The XPath now targets the correct container div with id="settings" -->
				<xpath expr="//form" position="inside">
					<div class="app_settings_block" data-string="Gandola Settings" string="Gandola" data-key="gandola_manager">
						<h2>General Settings</h2>
						<div class="row mt16 o_settings_container">
							<div class="col-xs-12 col-md-6 o_setting_box">
								<div class="o_setting_right_pane">
									<!-- FIX 2: Label `for` attribute now correctly points to the field name -->
									<label for="gandola_product_ids"/>
									<div class="text-muted">
										Gandola Product Ids
									</div>
									<div class="content-group">
										<div class="mt16">
											<!-- FIX 3: Added 'many2many_tags' widget for better UX -->
											<field name="gandola_product_ids" widget="many2many_tags" class="o_light_label"/>
										</div>
									</div>
								</div>
							</div>
							<div class="col-xs-12 col-md-6 o_setting_box">
								<div class="o_setting_right_pane">
									<!-- FIX 2: Label `for` attribute now correctly points to the field name -->
									<label for="gandola_payment_term_id"/>
									<div class="text-muted">
										Gandola Payment Term
									</div>
									<div class="content-group">
										<div class="mt16">
											<field name="gandola_payment_term_id" class="o_light_label"/>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</xpath>
            </field>
        </record>

        <!-- Action to open the Settings screen -->
		<record id="gandola_manager_settings_action" model="ir.actions.act_window">
			<field name="name">Gandola Configuration</field>
            <field name="type">ir.actions.act_window</field>
			<field name="res_model">res.config.settings</field>
			<field name="view_id" ref="gandola_manager_settings_view_form"/>
			<field name="view_mode">form</field>
			<field name="target">inline</field>
			<field name="context">{'module' : 'gandola_manager'}</field>
		</record>

        <!-- Menu item to access the Settings -->
        <!-- This assumes you have a root menu with id="gandola_manager_menu_root" -->
        <menuitem
            id="gandola_manager_settings_menu"
            name="Settings"
            parent="gandola_manager.gandola_manager_menu_root" 
            sequence="99"
            action="gandola_manager_settings_action"
            groups="base.group_system"/>

    </data>
</odoo>

